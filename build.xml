<?xml version="1.0"?>

<!--
build.xml adapted from Shawn Wilsher's rtse
(http://shawnwilsher.com/extensions/rtse/)
 -->

<project name="memchaser" default="createxpi">
  <property file="build.properties"/>
  <fail unless="build.version" message="Build version must be specified."/>
  <tstamp>
    <format property="build.number" pattern="yyyyMMddhhmm"/>
  </tstamp>
  <property name="filename" value="${ant.project.name}-${build.version}-${build.number}.xpi"/>

  <target name="createxpi">
    <delete file="${filename}"/>
    <zip destfile="${filename}">
      <zipfileset dir="extension" includes="chrome/**" excludes="**GIT"/>
      <zipfileset dir="extension" includes="defaults/**" excludes="**GIT"/>
      <zipfileset dir="extension" includes="resource/**" excludes="**GIT"/>
      <zipfileset dir="extension" includes="chrome.manifest"/>
      <zipfileset dir="extension" includes="install.rdf"/>
    </zip>
  </target>

  <target name="cleanup">
    <!-- Delete the chrome directory, any other cleanup actions go here -->
    <delete dir="jar"/>
  </target>
</project>
